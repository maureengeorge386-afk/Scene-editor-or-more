# 3D场景编辑器 (Scene Editor)

一个基于 Vue 3 + Three.js 的现代化 3D 场景编辑器，提供强大的模型导入、材质编辑、动画控制和场景管理功能。

## ✨ 特性

### 🎨 核心功能
- **3D场景编辑**: 直观的3D场景编辑界面，支持实时预览
- **模型导入**: 支持多种3D模型格式（GLTF、GLB、OBJ、FBX、STL、DAE、3DS、PLY等）
- **几何体创建**: 支持创建立方体、球体、圆柱体、圆锥体、平面等基础几何体
- **材质系统**: 15+种材质类型，包括基础材质、PBR材质、金属材质、透明材质等
- **动画控制**: 支持模型动画播放、暂停、循环控制
- **场景管理**: 对象列表、复制、删除、聚焦等场景管理功能

### 🚀 高级功能
- **模型拆解演示**: 法拉利流水线组装动画演示
- **高斯泼溅模型**: 支持3D Gaussian Splatting点云模型加载（*注：将迁移至独立模块*）
- **粒子特效**: 多种粒子泼溅效果（水花、火花、烟雾、魔法、雪花等）
- **相机漫游**: 可配置的相机漫游路径和模式
- **光源配置**: 环境光、方向光、点光源、聚光灯等光源管理
- **天空盒配置**: HDRI环境贴图和天空盒预设
- **阴影系统**: 可配置的阴影类型和预设
- **后处理效果**: FXAA抗锯齿、Bloom泛光、雾效等

### 🛠️ 工具功能
- **选择工具**: 点击选择场景中的3D对象
- **移动工具**: 拖拽移动对象位置
- **键盘控制**: WASD/方向键控制对象移动
- **场景导出/导入**: ZIP格式的场景数据备份和恢复
- **对象属性编辑**: 实时编辑对象的位置、旋转、缩放等属性

## 📦 技术栈

- **前端框架**: Vue 3.3.0 (Composition API)
- **3D引擎**: Three.js 0.149.0
- **UI组件库**: Element Plus 2.4.4
- **构建工具**: Vite 3.0.0
- **类型系统**: TypeScript 4.6.4
- **状态管理**: Pinia 2.1.7
- **路由**: Vue Router 4.2.5
- **样式**: Sass 1.80.4
- **后处理**: PostProcessing 6.28.7

## 🚀 快速开始

### 环境要求

- Node.js >= 16.0.0
- npm >= 7.0.0 或 yarn >= 1.22.0

### 安装依赖

```bash
# 使用 npm
npm install

# 或使用 yarn
yarn install
```

> **注意**: 由于依赖版本冲突，需要使用 `--legacy-peer-deps` 参数安装

### 启动开发服务器

```bash
npm run dev
```
### 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist` 目录

### 预览生产构建

```bash
npm run serve
```

## 🎮 使用指南

### 基本操作

1. **导入模型**: 点击"选择文件"按钮或拖拽文件到场景中
2. **创建几何体**: 在工具栏选择几何体类型，点击场景创建
3. **选择对象**: 点击"选择"工具，然后点击场景中的对象
4. **移动对象**: 选择对象后，使用"移动"工具拖拽，或使用WASD键移动
5. **编辑属性**: 选择对象后，在属性编辑器中修改位置、旋转、缩放等

### 材质应用

1. 选择场景中的对象
2. 在工具栏选择材质类型
3. 材质会自动应用到选中的对象

### 场景导出/导入

- **导出**: 点击"导出ZIP"按钮，将场景数据和模型打包导出
- **导入**: 点击"导入ZIP"按钮，选择之前导出的ZIP文件恢复场景

### 相机漫游

1. 点击"漫游配置"按钮
2. 选择漫游模式（第一人称/第三人称）
3. 添加路径点
4. 保存配置并播放

## 📝 功能状态

### ✅ 已实现功能 (90%)

- 工具操作（选择、移动、复制、对象列表）
- 几何体创建（5种基础几何体）
- 材质系统（15种材质类型）
- 模型导入导出（多种格式支持）
- 场景管理（清空、重置相机、网格坐标轴）
- 高级功能（漫游配置、光源配置、天空盒配置）
- 基础特效系统（粒子特效）

> **注意**: 高斯泼溅（Gaussian Splatting）功能不讲行迭代并考虑移除，如有需要请关注（explore-the-world）

### 🚧 未实现功能 (10%)

- 城市建设组装演示
- 骨骼模型手势识别
- 骨骼模型运动追踪
- 法拉利贴图编辑

## 🔮 模块分离与扩展计划

为了更好的架构设计和功能扩展，部分高级功能将分离到独立的专业模块中实现。这些模块将专注于特定的应用场景和技术领域。

### 📦 即将分离的模块

#### 1. 实景重建与点云处理模块
**功能范围**:
- **3D Gaussian Splatting**: 神经辐射场重建技术，实现高保真度的场景重建
- **倾斜摄影建模**: 基于无人机倾斜摄影技术的三维实景重建
- **激光雷达点云处理**: LiDAR点云数据的导入、编辑、分析和可视化
- **点云融合**: 多源点云数据的融合与优化
- **点云编辑**: 点云数据的清理、分割、分类和标注
- **实景三维重建**: 基于照片序列的自动三维重建

**技术特点**:
- 支持大规模点云数据的实时渲染
- 点云数据的压缩与流式加载
- 多细节层次（LOD）优化
- 点云数据的空间索引与查询

#### 2. 地理信息与地球可视化模块
**功能范围**:
- **地球可视化**: 基于WebGL的全球地形和卫星影像渲染
- **地理坐标系统**: 支持多种坐标系（WGS84、GCJ02、BD09等）
- **地形渲染**: 数字高程模型（DEM）的实时渲染
- **卫星影像叠加**: 多层级卫星影像的加载与切换
- **地理标注**: 地图标记、路径规划、区域标注
- **3D Tiles支持**: 支持Cesium 3D Tiles格式的大规模场景加载

**应用场景**:
- 智慧城市可视化
- 地理信息系统（GIS）
- 城市规划与设计
- 环境监测与分析

#### 3. 建筑信息模型（BIM）模块
**功能范围**:
- **IFC格式支持**: 建筑信息模型的导入与解析
- **BIM数据管理**: 建筑构件的属性管理与查询
- **碰撞检测**: 建筑构件的冲突检测与分析
- **施工模拟**: 4D施工进度可视化
- **能耗分析**: 建筑能耗数据的可视化分析

#### 4. 数字孪生与物联网模块
**功能范围**:
- **实时数据接入**: 物联网设备数据的实时接入与可视化
- **数据驱动动画**: 基于实时数据的模型动画控制
- **设备状态监控**: 设备运行状态的3D可视化
- **预警系统**: 异常数据的可视化预警
- **历史数据回放**: 历史数据的时序回放与分析

### 🎯 模块化架构优势

1. **独立开发**: 各模块可独立开发、测试和部署
2. **按需加载**: 根据应用场景按需加载相应模块
3. **性能优化**: 针对特定场景进行深度优化
4. **易于维护**: 模块边界清晰，便于维护和升级
5. **灵活扩展**: 新功能可作为新模块快速集成

### 🔗 模块集成方式

各模块将通过统一的接口规范与主编辑器集成：

- **插件化架构**: 模块以插件形式动态加载
- **统一数据格式**: 使用标准化的数据交换格式
- **共享核心引擎**: 基于Three.js的统一渲染引擎
- **模块间通信**: 通过事件总线实现模块间通信

### 📅 开发路线图

- **Phase 1** (当前): 核心编辑器功能完善
- **Phase 2** (计划中): 实景重建与点云处理模块
- **Phase 3** (计划中): 地理信息与地球可视化模块
- **Phase 4** (未来): BIM模块与数字孪生模块

## 🐛 已知问题

- 部分依赖版本存在冲突，需要使用 `--legacy-peer-deps` 安装
- 某些大型模型加载可能较慢
- 移动端适配仍在优化中

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

查看 [LICENSE](./LICENSE) 文件了解详情

## 👥 作者

- 项目名称: hxcs-web-system
- 版本: 1.1.0.20250626_release

## 🙏 致谢

- [Three.js](https://threejs.org/) - 强大的3D库
- [Vue.js](https://vuejs.org/) - 渐进式JavaScript框架
- [Element Plus](https://element-plus.org/) - Vue 3组件库
- [Vite](https://vitejs.dev/) - 下一代前端构建工具

**注意**: 这是一个持续开发中的项目，部分功能可能仍在完善中。
